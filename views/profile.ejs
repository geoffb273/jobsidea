<style>
	body {
		justify-content: center;
	}
	#profilePic {
		height: 25vmin;
		width: 25vmin;
		border-radius: 150px;
		margin-top: 3vmin;
		margin-bottom: 2.5vw;
		margin-left: 2vw;
		margin-right: 1.5vw;
		background: #afb8c2;
		border: solid 0.1vmin;
		min-width: 150px;
		min-height: 150px;
	}
	
	#header {
		position: relative;
		left: 10vw;
		display: flex;
		width: 80vw;
		border-bottom: 0.5px solid;
		margin-top: 5vmin;
		background: white;
		border-radius: 5vmin;
		
	}
	
	#header > #info {
		font-size: max(16px, 2vmin);
	}
	
	#header > #rightheader {
		position: absolute;
		right: 0px;
		display: flex;
		flex-direction: column;
	}
	#header > #rightheader > button {
		background: black;
		color: white;
		border-radius: 5vmin;
		margin-right: 1.5vw;
		font-size: max(12px, 2vmin);
	}
	
	#header > #rightheader > form > #chatButton {
		background: black;
		color: white;
		border-radius: 5vmin;
		margin-right: 1.5vw;
		font-size: max(16px, 2vmin);
		margin-top: max(12.5vmin, 40px);
	}
	
	#header > #rightheader > #upload {
		margin-top: max(10vmin, 40px);
	}
	
	label {
		margin-top: max(10vmin, 40px);
		cursor: pointer;
		background: black;
		color: white;
		padding-right: 10px;
		padding-left: 10px;
		margin-right: 1.5vw;
		border-radius: 5vmin;
		font-size: max(12px, 2vmin);
		width: 12vw;
		padding-top: 2.5px;
		padding-bottom: 2.5px;
	}

	#upload-photo {
		opacity: 0;
		position: absolute;
		z-index: -1;
	}
	
	@media only screen and (max-width: 700px) {
		#header {
			left: 0;
			margin-left: 0;
			width: 98vw;
		}
		
		#profilePic {
			height: 20vmin;
			width: 20vmin;
			min-width: 25px;
			min-height: 25px;
			margin-top: 7.5vmin;
		}
	}
	
	
</style>
<meta name="viewport" content="width=device-width,initial-scale=0.8">

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<head>
	<%- include('css/style'); %>
</head>

<script src="/socket.io/socket.io.js"></script>

<script>
	var own = '<%- own%>';
	var username = '<%- username%>'
	var picId = '<%- picId %>'
	if (own) {
		var socket = io()
		socket.emit('self room', {username: username});
	}
	
	var getProfilePic = function() {
		$.get("/pics/" + picId, function(url) {
			var image = document.getElementById("profilePic")
			if (url.length > 0) {
				image.src = url
			}
			
		});
	}
	if (picId) {
		getProfilePic()
	}
</script>


<div id="header">
	<img id="profilePic"></img>
	<div id="info">
	<%if (name) {%>
		<p id="name" style="font-size: max(26px, 3vw); text-align:left;"><%= name %></p>
	<%}%>
	<%if (username) {%>
		<p id="username"><i>&#64<%= username %></i></p>
	<%}%>
	<%if (email) {%>
		<p id="email"><%= email %></p>
	<%}%>
	</div>
	<div id="rightheader">
		<%if (own) {%>
				<form id="upload" method="post" enctype="multipart/form-data">
					<label for="upload-photo">Edit Profile Pic<input type="file" id="upload-photo" name="photo" accept="image/*" /></label>
				</form>
				<button id="logout" onclick="window.location.href='/login'">Log Out</button>
			
		<%} else {%>
			<form action="/chats/<%- username %>" method="post">
				<input type="submit" id="chatButton" value="Chat">
			</form>
		<%}%>
	</div>
	
</div>

<script>
var username = '<%- username%>'
var own = '<%- own%>'
if (own) {
	var upload = document.getElementById("upload")
	
	upload.action = "/pics/" + username
	
	var photo = document.getElementById("upload-photo")
	photo.onchange = (e) => {
		upload.submit()
	}
}
</script>

<% if(user) { %>
<%- include('user'); %>
<% } else { %>
<%- include('restaurant'); %>
<% } %>